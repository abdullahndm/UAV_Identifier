{% extends 'layout.html' %}

{% block title %}Input{% endblock %}

{% block content %}
<h2>Halaman Input</h2>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
</head>

<div id="page-wrapper">
  <h4>Perhatikan cara penting pada berikut untuk mengoperasikan input data!</h4>
  <hr>
  <h6>1. Berikut Tabel Komando Input Suara</h6>
  <h6>2. Contoh Input Suara</h6>
  <h6>"Posisi sayap BAWAH Kemiringan sayap POSITIF Bentuk sayap DELTA Arah sayap LANCIP KEBELAKANG"</h6>
  <h6><i>***NB: Kalimat harus sesuai dengan contoh diatas***</i></h6>
  <hr>

  <button class="btn btn-outline-success" type="button" onclick="startDictation('name')">Start</button>
  <br>
  <label for="date">Arah Sayap</label>
  <div class="input-group">
    <input type="text" class="form-control" id="arah" placeholder="Isi..." aria-label="Isi..."
      aria-describedby="basic-addon2">
    <div class="input-group-append">
      <!-- <button class="btn btn-outline-danger" type="button" onclick="startDictation('name')">Stop</button> -->
    </div>
  </div>
  <p></p>

  <label for="date">Kemiringan Sayap</label>
  <div class="input-group">
    <input type="text" class="form-control" id="miring" placeholder="Isi..." aria-label="Isi..."
      aria-describedby="basic-addon2">
    <div class="input-group-append">
      <!-- <button class="btn btn-outline-success" type="button" onclick="startDictation('name')">Start</button>
      <button class="btn btn-outline-danger" type="button" onclick="startDictation('name')">Stop</button> -->
    </div>
  </div>
  <p></p>

  <label for="date">Posisi Sayap</label>
  <div class="input-group">
    <input type="text" class="form-control" id="posisi" placeholder="Isi..." aria-label="Isi..."
      aria-describedby="basic-addon2">
    <div class="input-group-append">
      <!-- <button class="btn btn-outline-success" type="button" onclick="startDictation('name')">Start</button>
      <button class="btn btn-outline-danger" type="button" onclick="startDictation('name')">Stop</button> -->
    </div>
  </div>
  <p></p>

  <label for="date">Bentuk Sayap</label>
  <div class="input-group">
    <input type="text" class="form-control" id="bentuk" placeholder="Isi..." aria-label="Isi..."
      aria-describedby="basic-addon2">
    <div class="input-group-append">
      <!-- <button class="btn btn-outline-success" type="button" onclick="startDictation('name')">Start</button>
      <button class="btn btn-outline-danger" type="button" onclick="stopDictation">Stop</button> -->
    </div>
  </div>

  <p></p>
  <i>*Mohon dicek ulang agar tidak ada kesalahan</i>
  <hr>
  <h6>Apakah anda yakin untuk mengaksesnya?</h6>
  <p></p>
  <button type="button" class="btn btn-primary btn-block">Run</button>

  <script>
    function startDictation(x) {
      if (window.hasOwnProperty('webkitSpeechRecognition')) {
        var recognition = new webkitSpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = false;

        recognition.lang = "id-ID";
        recognition.start();
        recognition.onresult = function (e) {
          var hasil = e.results[0][0].transcript.split(/(\s+)/);
          // var hasil2 = hasil.join(' ');
          console.log(hasil);
          document.getElementById('arah').value = hasil[0];
          document.getElementById('miring').value = hasil[2];
          document.getElementById('posisi').value = hasil[4];
          document.getElementById('bentuk').value = hasil[6];
          recognition.stop();
        };
        recognition.onerror = function (e) {
          recognition.stop();
        }
      }
    }
  </script>

</html>


{% endblock %}