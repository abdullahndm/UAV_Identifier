{% extends 'layout.html' %}

{% block title %}Input{% endblock %}

{% block content %}
<h2>Halaman Input</h2>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link type="text/css" href="@@path/vendor/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet"> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="@@path/vendor/sweetalert2/dist/sweetalert2.all.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<div id="page-wrapper">
  <h4>Perhatikan Catatan Penting Berikut ini untuk Menginput Data!</h4>
  <hr>
  <h6>1. Berikut Tabel Komando Input Suara</h6>
  <img src="static/pic/itu.jpg" class="img-center" alt="Responsive image" style="max-width:50%;">
  <h6>2. Contoh Input Suara</h6>
  <p>"Posisi sayap BAWAH kemiringan sayap POSITIF bentuk sayap DELTA arah sayap LANCIP KEBELAKANG
    jenis mesin PISTON jumlah mesin SATU posisi mesin DEPAN bentuk badan TEBAL hidung badan BULAT tengah badan TABUNG
    posisi ekor DIATAS EKOR jumlah ekor TUNGGAL bentuk ekor OVAL persenjataan BERSENJATA warna POLOS"</h6>
  <h6>3. Hasil terletak di bagian bawah dan akan muncul setelah menekan tombol Run </p>
    <h6><i>***NB: Kalimat harus sesuai dengan contoh diatas***</i></h6>
    <hr>

    <!---------------------------------------------------SAYAP PESAWAT-------------------------------------------------->

    <h6>Klik tombol Start dibawah ini untuk memulai</h6>
    <p></p>
    <button class="btn btn-outline-success btn-block" type="button" onclick="startDictation('name')">Start</button>
    <button class="btn btn-outline-danger btn-block" type="button" onclick="">Stop</button>
    <br>
    <hr>
    <h4>Sayap</h4>
    <br>
    <form method="POST" action="{{url_for('predict')}}">
    <label for="date">Arah Sayap</label>
    <div class="input-group">
      <input name="arah_sayap" type="number" class="form-control" id="arah" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Kemiringan Sayap</label>
    <div class="input-group">
      <input name="kemiringan_sayap" type="number" class="form-control" id="miring" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Posisi Sayap</label>
    <div class="input-group">
      <input name="posisi_sayap" type="number" class="form-control" id="posisi" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Bentuk Sayap</label>
    <div class="input-group">
      <input name="bentuk_sayap" type="number" class="form-control" id="bentuk" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <!---------------------------------------------------MESIN PESAWAT-------------------------------------------------->
    <hr>
    <h4>Mesin</h4>
    <br>
    <label for="date">Jenis Mesin</label>
    <div class="input-group">
      <input name="jenis_mesin" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Jumlah Mesin</label>
    <div class="input-group">
      <input name="jumlah_mesin" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Posisi Mesin</label>
    <div class="input-group">
      <input name="posisi_mesin" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <!---------------------------------------------------BADAN PESAWAT-------------------------------------------------->

    <hr>
    <h4>Badan</h4>
    <br>
    <label for="date">Bentuk Badan</label>
    <div class="input-group">
      <input name="bentuk_badan" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Hidung Badan</label>
    <div class="input-group">
      <input name="hidung_badan" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Tengah Badan</label>
    <div class="input-group">
      <input name="tengah_badan" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <!---------------------------------------------------EKOR PESAWAT--------------------------------------------------->

    <hr>
    <h4>Ekor</h4>
    <br>
    <label for="date">Posisi Ekor</label>
    <div class="input-group">
      <input name="posisi_ekor" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Jumlah Ekor</label>
    <div class="input-group">
      <input name="jumlah_ekor" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <label for="date">Bentuk Ekor</label>
    <div class="input-group">
      <input name="bentuk_ekor" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>

    <!---------------------------------------------------PERSENJATAAN PESAWAT------------------------------------------->

    <!-- <hr>
    <h4>Persenjataan</h4>
    <br>
    <label for="date">Persenjataan</label>
    <div class="input-group">
      <input name="persenjataan" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p> -->

    <!---------------------------------------------------WARNA PESAWAT-------------------------------------------------->
    <hr>
    <h4>Warna</h4>
    <br>
    <label for="date">Warna</label>
    <div class="input-group">
      <input name="warna" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>
    <hr>
    

    <hr>
    <h4>nama ptta</h4>
    <br>
    <label for="date">nama PTTA</label>
    <div class="input-group">
      <input name="nama_ptta" type="number" class="form-control" id="" placeholder="Isi..." aria-label="Isi..."
        aria-describedby="basic-addon2">
      <div class="input-group-append">
      </div>
    </div>
    <p></p>
    <hr>
    <!------------------------------------------------------SELESAI----------------------------------------------------->

    <p><i>*Mohon dicek ulang agar tidak ada kesalahan</i></p>
    <hr>
    <h6>Apakah anda yakin untuk mengaksesnya?</h6>
    <p></p>
    <button type="submit" id="submit-hasil" class="btn btn-primary btn-block">Run</button>
    </form>
    <p></p>
    <hr>
    <div class="card text-center">
      <h6 class="card-header">Hasil</h6>
      <div class="card-body text-dark">
        <h5 class="card-text">Nama PTTA :</h5>
        <h5 class="card-text">Fusi Informasi Keseluruhan :</h5>
        <p id="hasil"></p>

        <h5 class="card-text">Prediksi :</h5>
        {% if pred != 0 %}
        <p>{{pred}}</p>
        {% else %}
        <p>0</p>
        {% endif %}

        <!-- <h5 class="card-text">Akurasi Naive Bayes :</h5>
        {% if akurasi != 0 %}
        <p>{{akurasi}}%</p>
        {% else %}
        <p>0%</p>
        {% endif %} -->

      </div>
    </div>

    <script>
      function startDictation(x) {
        Swal.fire({
          icon: 'warning',
          title: 'ATTENTION',
          text: 'Rekaman akan dimulai!',
          showConfirmButton: false,
          timer: 3000,
          timerProgressBar: true,
        })
        setTimeout(() => {
          if (window.hasOwnProperty('webkitSpeechRecognition')) {
            var recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;

            recognition.lang = "id-ID";
            recognition.start();
            recognition.onresult = function (e) {
              var hasil = e.results[0][0].transcript.split(/(\s+)/);
              // var hasil2 = hasil.join(' ');
              console.log(hasil);
              document.getElementById('arah').value = hasil[0];
              document.getElementById('miring').value = hasil[2];
              document.getElementById('posisi').value = hasil[4];
              document.getElementById('bentuk').value = hasil[6];
              recognition.stop();
            };
            recognition.onerror = function (e) {
              recognition.stop();
            }
          }
        }, 3000);
      }

      function hasil() {
        var arah = document.getElementById('arah').value;
        var miring = document.getElementById('miring').value;
        var posisi = document.getElementById('posisi').value;
        var bentuk = document.getElementById('bentuk').value;
        // var persenjataan = document.getElementById('persenjataan').value;
        // var warna = document.getElementById('warna').value;
        var hasil = "Posisi sayap " + arah + " kemiringan sayap " + miring + " posisi " + posisi + " bentuk sayap " + bentuk;
        console.log(hasil);
        document.getElementById('hasil').innerHTML = hasil;
      }
    </script>

</html>


{% endblock %}